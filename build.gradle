/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.5/userguide/java_library_plugin.html
 */

plugins {
  id 'application'
  id "com.palantir.graal" version "0.7.1-10-gd3690b4"
}

repositories {
  // Use jcenter for resolving dependencies.
  // You can declare any Maven/Ivy/file repository here.
  jcenter()
}
sourceCompatibility = 11
targetCompatibility = 11
mainClassName = 'jp.gr.java_conf.saka.tail.TailCli'

graal {
  mainClass mainClassName
  outputName 'tail'
  javaVersion '11'
  // "Unable to detect supported WINDOWS native software development toolchain"
  // error occurs if 20.1.0 is used in JPN environment
  graalVersion '20.0.0'
  option '--no-fallback'
  option '-H:+ReportExceptionStackTraces'
}

dependencies {
  implementation group: 'info.picocli', name: 'picocli', version: '4.4.0'
  implementation 'com.google.guava:guava:29.0-jre'
  implementation group: 'com.google.dagger', name: 'dagger', version: '2.28.1'

  annotationProcessor group: 'info.picocli', name: 'picocli-codegen', version: '4.4.0'
  annotationProcessor 'com.google.dagger:dagger-compiler:2.28.1'

  // Use JUnit Jupiter API for testing.
  testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.2'
  testImplementation group: 'org.mockito', name: 'mockito-core', version: '3.3.3'
  testImplementation group: 'org.assertj', name: 'assertj-core', version: '3.16.1'

  // Use JUnit Jupiter Engine for testing.
  testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.6.2'
}

test {
  // Use junit platform for unit tests
  useJUnitPlatform()
}
